---
- name: Ensure some cg.dev utils are installed
  ansible.builtin.command:
    cmd: go install chainguard.dev/{{ item }}@latest
    creates: /home/{{ user }}/.go/bin/{{ item }}
  loop:
    - melange
    - apko

- name: Clone some cg git repos
  ansible.builtin.include_tasks: "{{ role_path }}/../git/tasks/clone.yml"
  vars:
    email: arturo.borrero@chainguard.dev
    git_repos:
      - url: git@github.com:wolfi-dev/wolfictl.git
        dir: cg/wolfi-dev/wolfictl

- name: Install wolfictl
  ansible.builtin.command:
    cmd: go install
    chdir: /home/{{ user }}/git/cg/wolfi-dev/wolfictl/
    creates: /home/{{ user }}/.go/bin/wolfictl
